# Port-based MCP Proxy Mappings
# Each MCP instance has its own proxy port that maps to its internal MCP port
# The proxy adds authentication (Bearer token and Basic Auth) before forwarding requests

# Example mappings:
# Proxy Port 9101 -> MCP Port 11111 (Instance 1)
# Proxy Port 9102 -> MCP Port 11112 (Instance 2)
# Proxy Port 9103 -> MCP Port 11113 (Instance 3)

# Authentication:
# - Bearer token: Use the instance's password as the Bearer token
# - Basic Auth: Username is 'user' + instance ID (without hyphens), password is the instance's password

# Example usage:
# curl -H "Authorization: Bearer password_for_instance1" http://localhost:9101/
# curl -u user1:password_for_instance1 http://localhost:9101/

# Note: The actual mappings are generated dynamically by the application
# and stored in the Nginx configuration file. This file serves as documentation
# and example only.

# Example of a generated server block for instance 1:
# server {
#     listen 9101;
#     server_name 127.0.0.1;
#
#     # Access and error logs
#     access_log /var/log/nginx/mcp-proxy-instance1.access.log;
#     error_log /var/log/nginx/mcp-proxy-instance1.error.log;
#
#     # Bearer token validation
#     if ($http_authorization !~ "^Bearer password_for_instance1$") {
#         return 401 'Unauthorized';
#     }
#
#     # Basic auth validation
#     if ($http_authorization !~ "^Basic dXNlcjE6cGFzc3dvcmRfZm9yX2luc3RhbmNlMQ==$") {
#         add_header WWW-Authenticate 'Basic realm="Playwright MCP"';
#         return 401 'Unauthorized';
#     }
#
#     # Proxy to MCP server
#     location / {
#         proxy_pass http://127.0.0.1:11111;
#     }
# }
